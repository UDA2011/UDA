{"ast":null,"code":"var _jsxFileName = \"D:\\\\UDA web app\\\\frontend\\\\src\\\\pages\\\\Add product.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport AddStore from \"../components/AddStore\"; // Make sure this component is correctly handling product addition\nimport AuthContext from \"../AuthContext\";\nimport locationIcon from \"../assets/location-icon.png\"; // Importing instead of require()\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Store() {\n  _s();\n  const [showModal, setShowModal] = useState(false);\n  const [products, setProducts] = useState([]);\n  const authContext = useContext(AuthContext);\n  useEffect(() => {\n    if (authContext.user) {\n      fetchData();\n    }\n  }, [authContext.user]); // Added dependency to re-fetch when user data is available\n\n  // Fetching all products data\n  const fetchData = async () => {\n    try {\n      var _authContext$user;\n      const response = await fetch(`http://localhost:4000/api/addproduct/get/${(_authContext$user = authContext.user) === null || _authContext$user === void 0 ? void 0 : _authContext$user._id}`);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch products\");\n      }\n      const data = await response.json();\n      setProducts(data);\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n    }\n  };\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-span-12 lg:col-span-10 flex justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col gap-5 w-11/12 border-2 p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-bold\",\n          children: \"Manage Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-blue-500 hover:bg-blue-700 text-white font-bold p-2 text-xs rounded\",\n          onClick: toggleModal,\n          children: \"Add Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), showModal && /*#__PURE__*/_jsxDEV(AddStore, {\n        refreshData: fetchData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 23\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",\n        children: products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white w-full h-fit flex flex-col gap-4 p-4 shadow-md rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: \"product\",\n              className: \"h-60 w-full object-cover rounded-md\",\n              src: product.image\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-3 justify-between items-start\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold text-lg\",\n              children: product.productname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-700\",\n              children: product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                alt: \"location-icon\",\n                className: \"h-6 w-6\",\n                src: locationIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: product.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-green-600 font-semibold\",\n              children: [\"$\", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)]\n        }, product._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(Store, \"vg1vSDKoroy52MpfyCZJAh2KtP4=\");\n_c = Store;\nexport default Store;\nvar _c;\n$RefreshReg$(_c, \"Store\");","map":{"version":3,"names":["React","useState","useEffect","useContext","AddStore","AuthContext","locationIcon","jsxDEV","_jsxDEV","Store","_s","showModal","setShowModal","products","setProducts","authContext","user","fetchData","_authContext$user","response","fetch","_id","ok","Error","data","json","error","console","toggleModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","refreshData","map","product","alt","src","image","productname","description","category","price","_c","$RefreshReg$"],"sources":["D:/UDA web app/frontend/src/pages/Add product.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport AddStore from \"../components/AddStore\"; // Make sure this component is correctly handling product addition\r\nimport AuthContext from \"../AuthContext\";\r\nimport locationIcon from \"../assets/location-icon.png\"; // Importing instead of require()\r\n\r\nfunction Store() {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const authContext = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    if (authContext.user) {\r\n      fetchData();\r\n    }\r\n  }, [authContext.user]); // Added dependency to re-fetch when user data is available\r\n\r\n  // Fetching all products data\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        `http://localhost:4000/api/addproduct/get/${authContext.user?._id}`\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch products\");\r\n      }\r\n      const data = await response.json();\r\n      setProducts(data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching products:\", error);\r\n    }\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setShowModal(!showModal);\r\n  };\r\n\r\n  return (\r\n    <div className=\"col-span-12 lg:col-span-10 flex justify-center\">\r\n      <div className=\"flex flex-col gap-5 w-11/12 border-2 p-4\">\r\n        <div className=\"flex justify-between\">\r\n          <span className=\"font-bold\">Manage Products</span>\r\n          <button\r\n            className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold p-2 text-xs rounded\"\r\n            onClick={toggleModal}\r\n          >\r\n            Add Product\r\n          </button>\r\n        </div>\r\n        {showModal && <AddStore refreshData={fetchData} />} {/* Ensure AddStore correctly updates products */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {products.map((product) => (\r\n            <div\r\n              className=\"bg-white w-full h-fit flex flex-col gap-4 p-4 shadow-md rounded-lg\"\r\n              key={product._id}\r\n            >\r\n              <div>\r\n                <img\r\n                  alt=\"product\"\r\n                  className=\"h-60 w-full object-cover rounded-md\"\r\n                  src={product.image}\r\n                />\r\n              </div>\r\n              <div className=\"flex flex-col gap-3 justify-between items-start\">\r\n                <span className=\"font-bold text-lg\">{product.productname}</span>\r\n                <span className=\"text-gray-700\">{product.description}</span>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <img alt=\"location-icon\" className=\"h-6 w-6\" src={locationIcon} />\r\n                  <span>{product.category}</span>\r\n                </div>\r\n                <span className=\"text-green-600 font-semibold\">${product.price}</span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Store;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}